<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Animasi Kipas - Kelompok X</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Animasi Objek Tugas 2 — Kipas Angin</h2>

  <div class="container">
    <div class="info">
      <h3>Anggota Kelompok</h3>
      <ul>
        <li>Ammar Ghozy Tanumijaya - 5025231203</li>
        <li>Huraira Shenmue Mahanee - 5025231216</li>
      </ul>

      <h4>Foto objek asli</h4>
      <img src="Media/Foto Kipas.jpg" alt="Foto Kipas Asli" style="max-width: 280px;"/>

      <h4>Video objek asli</h4>
      <p style="font-size: 12px; color: #666;"></p>
      <video controls style="max-width: 280px;">
        <source src="Media/Video Kipas.mp4" type="video/mp4">
      </video>

      <h4>Desain Tree Hierarchical</h4>
      <pre style="font-size: 11px; line-height: 1.5; background: #f5f5f5; padding: 12px; border-radius: 5px;">
        <strong>Fan Assembly</strong>
        │
        ├── Motor Housing
        │
        ├── Hanging Rod
        │
        ├── Frame Guard
        │   ├── Front Ring (outer)
        │   ├── Front Ring (inner)
        │   ├── 8 Spokes
        │   └── Back Cover (disk)
        │
        ├── Hub/Rotor (rotating 360°)
        │
        └── Blades (rotating)
          ├── Blade 1 (0°)
          ├── Blade 2 (90°)
          ├── Blade 3 (180°)
          └── Blade 4 (270°)
      </pre>

      <div class="controls">
        <div class="control-group">
          <label><strong>Kecepatan Blade:</strong></label><br/>
          <div class="speed-buttons">
            <button id="speedLow">Low</button>
            <button id="speedMed">Medium</button>
            <button id="speedHigh">High</button>
          </div>
          <input id="speed" type="range" min="0" max="60" value="30" />
          <span id="speedVal">30</span>
          <div class="rpm-meter">
            <label>RPM:</label>
            <span id="rpmValue">0</span>
          </div>
        </div>
        
        <div class="control-group">
          <label><strong>Yaw Rotation (Putar Kipas):</strong></label><br/>
          <input id="yaw" type="range" min="-180" max="180" value="0" />
          <span id="yawVal">0</span>°
        </div>

        <div class="control-group">
          <label><strong>Mode:</strong></label><br/>
          <button id="toggleNightMode">Toggle Night Mode</button>
        </div>

        <div class="control-group">
          <label><strong>Sound:</strong></label><br/>
          <input type="checkbox" id="soundToggle" checked>
          <label for="soundToggle">Enable Fan Sound</label>
        </div>

        <div class="control-group">
          <label><strong>Oscillation:</strong></label><br/>
          <input type="checkbox" id="oscillateToggle">
          <label for="oscillateToggle">Enable Oscillation</label>
          <div class="oscillation-controls">
            <label>Speed:</label>
            <input type="range" id="oscillateSpeed" min="1" max="10" value="5">
            <label>Range:</label>
            <input type="range" id="oscillateRange" min="30" max="120" value="60">
          </div>
        </div>

        <div class="control-group">
          <label><strong>Camera Control:</strong></label><br/>
          <button id="resetCamera">Reset View</button>
          <div class="camera-info">
            <span>Click and drag on canvas to orbit camera</span>
            <br>
            <span>Use mouse wheel to zoom</span>
          </div>
        </div>

        <div class="performance-stats">
          <span>FPS: <span id="fpsCounter">60</span></span>
          <br>
          <span>Vertices: <span id="vertexCount">0</span></span>
        </div>
      </div>
    </div>

    <div>
      <canvas id="gl-canvas" width="800" height="600"></canvas>
    </div>
  </div>

  <script id="vertex-shader" type="x-shader/x-vertex">
  #version 300 es
  precision mediump float;

  in vec4 aPosition;
  in vec3 aNormal;
  in vec4 aColor;

  uniform mat4 modelViewMatrix;
  uniform mat4 projectionMatrix;
  uniform mat3 normalMatrix;

  out vec3 vNormal;
  out vec3 vPosition;
  out vec4 vColor;

  void main() {
    vNormal = normalize(normalMatrix * aNormal);
    vPosition = (modelViewMatrix * aPosition).xyz;
    vColor = aColor;
    gl_Position = projectionMatrix * modelViewMatrix * aPosition;
  }
  </script>

  <script id="fragment-shader" type="x-shader/x-fragment">
  #version 300 es
  precision mediump float;

  in vec3 vNormal;
  in vec3 vPosition;
  in vec4 vColor;

  uniform vec3 lightPosition;
  uniform vec3 ambientProduct;
  uniform vec3 diffuseProduct;
  uniform vec3 specularProduct;
  uniform float shininess;

  out vec4 fColor;

  void main() {
    vec3 N = normalize(vNormal);
    vec3 L = normalize(lightPosition - vPosition);
    float lambert = max(dot(N, L), 0.0);
    vec3 E = normalize(-vPosition);
    vec3 H = normalize(L + E);
    float spec = pow(max(dot(N, H), 0.0), shininess);

    vec3 ambient = ambientProduct;
    vec3 diffuse = diffuseProduct * lambert;
    vec3 specular = specularProduct * spec;

    vec3 color = ambient + diffuse + specular;
    fColor = vec4(vColor.rgb * color, 1.0);
}
  </script>

  <script src="initShaders.js"></script>
  <script src="MVnew.js"></script>
  <script src="kipasAngin.js"></script>
</body>
</html>
